\chapter{Definició del Projecte}
\label{chapter:definition}

En aquest segon capítol es descriuen les línies generals que s'han seguit per dur a terme el projecte i per definir-ne el context. Comencem explicant el procediment que ens permetrà aconseguir els objectius proposats.

\section{Procés d'extracció}
En un principi, la idea que vam plantejar per resoldre el problema de l'extracció de referències d'un document PDF va ser intentar distingir la informació de la referència bibliogràfica directament del fitxer, seguint uns passos semblants als de la figura següent.

\begin{figure}[H]
\begin{center}
\includegraphics[width=\textwidth]{figures/definition:invalid-extraction-diagram.pdf}
\caption{Primera idea per l'extracció de referències}
\label{fig:definition:invalid-extraction-diagram}
\end{center}
\end{figure}

Això presenta moltes limitacions. Per començar, la impossibilitat d'extreure informació que no es troba dins del text (e.g. el número de pàgines de l'article). A més, el text que dels fitxers PDF no té una estructura prou clara com per poder distingir entre els diferents camp. Aquest segon problema es tracta amb més en detall al proper capítol.

\paragraph{}
La solució que hem trobat per poder tirar endavant consisteix en fer ús del que s'anomenem \textit{biblioteques digitals}: grans bases de dades amb informació sobre articles i els corresponents fitxers en format digital. A més, la majoria d'elles estan indexades pels principals cercadors disponibles a Internet. Els diagrama actualitzat es mostra a la figura \ref{fig:definition:extraction-diagram}. Bàsicament, per cada fitxer l'aplicació:
\begin{enumerate}
    \item{Extreu el contingut en forma de text.}
    \item{Genera un llistat de consultes a partir del text extret.}
    \item{Obté els resultats d'aquestes consultes amb algun cercador (Google, Bing, etc.).}
    \item{Mira d'extreure la referència de les pàgines retornades pel cercador.}
    \item{Comprova que les dades de la referència corresponen al fitxer.}
    \item{Dóna format a les dades de la referència.}
\end{enumerate}

\begin{figure}[H]
\begin{center}
\includegraphics[width=\textwidth]{figures/definition:extraction-diagram.pdf}
\caption{Esquema del procés a seguir per extreure una referència}
\label{fig:definition:extraction-diagram}
\end{center}
\end{figure}

Així doncs, hem de fer una mica més de tomb per poder aconseguir els resultats desitjats, però els passos són més senzills d'aplicar, donant-nos més garanties que funcionarà.


\section{\BibTeX}
\label{chapter:definition:section:bibtex}
Per poder entendre el context del projecte cal que descrivim l'eina de maneig de referències \BibTeX{} i la sintaxi del llenguatge que utilitza. 
En el nostre cas farem servir aquest llenguatge com a format de sortida al generar els índexos bibliogràfics. Al llistat \ref{listing:exampleBibTeX} es mostra un exemple d'una referència d'un article científic expressat en el format \BibTeX:
\begin{center}
\begin{lstlisting}[caption={Referència expressada en \BibTeX}, label=listing:exampleBibTeX]
@article{MoSh:27,
  title = {Size direction games over the real line},
  author = {Moran, Gadi and Shelah, M., Saharon},
  journal = {Israel Journal of Mathematics},
  pages = {442--449},
  volume = {14},
  year = {1973},
}
\end{lstlisting}
\end{center}

Alguns aspectes a comentar sobre l'exemple anterior:
\begin{itemize}
\item{}
La primera línia conté el tipus de document i un identificador. El primer defineix els camps obligatoris que s'han d'especificar, i el segon ens permetrà citar a la referència des d'un document. En el nostre cas només ens interessen les referències de tipus \textit{article} i haurem de definir, com a mínim, els camps \textit{author}, \textit{title}, \textit{journal} i \textit{year}, que són obligatoris.

\item{}
Es considera que el nom d'un autor o editor pot constar de quatre parts diferents: \textit{First}, \textit{von}, \textit{Last}, \textit{Jr.}. Es poden ordenar de diverses maneres, però nosaltres ho farem amb \texttt{<von> <last>, <middle>, <first>}. Cal separar múltiples noms amb la paraula \texttt{and}.

\item{}
L'últim camp d'una referència pot acabar o no amb una coma.
\end{itemize}

\section{Funcionalitats}
A continuació es llisten totes les funcionalitats que l'aplicació ofereix a l'usuari final:
\begin{itemize}
\item{}
Extracció de la referència bibliogràfica corresponent a un o més articles que es troben en fitxers PDF en algun directori.

\item{}
Possibilitat d'exportar les referències extretes en format \BibTeX{} i desar-les a un fitxer \texttt{.bib}

\item{}
Generació automàtica de regles d'extracció a partir d'exemples.

\item{}
Importació de referències en un fitxer \texttt{.bib} per tal de poder-los fer servir d'exemples.

\item{}
Totes les operacions CRUD\footnote{\textit{Create}, \textit{read}, \textit{update} i \textit{delete}.} per a la gestió de referències i regles d'extracció.
\end{itemize}


\section{Disseny del sistema}
Hem organitzat el codi del sistema en els mòduls que es llisten a continuació:
\begin{itemize}
\item{\textit{Raw Content Extraction} (rce):}
Agrupa totes les classes encarregades d'extreure el contingut dels documents PDF.

\item{\textit{Information Retrieval} (ir):}
Encarregat de comunicar-se amb els diferents cercadors disponibles a Internet per obtenir pàgines que contenen informació de la referència que volem extreure.

\item{\textit{Information Extraction} (ie):}
Conté tot el codi que permet obtenir la referència a partir d'una pàgina HTML. A més, també és l'encarregat de generar nous \textit{wrappers}.

\item{\textit{References}:}
Per una banda fa un anàlisis sintàctic de les referències extretes per poder-les validar. Per l'altra, transforma a \BibTeX les referències extretes.

\item{Base de dades (db):}
Tal i com indica el seu nom, duu a terme els accessos la base de dades.

\item{\textit{Main}: }
Enllaça tots els mòduls anteriors i proporciona punts d'entrada a la interfície d'usuari. Fa de façana del sistema.

\item{\textit{Graphical User Interface} (gui):}
Interfície d'usuari més o menys amigable.
\end{itemize}

La figura \ref{fig:module_diagram} mostra com interaccionen entre ells.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.6\textwidth]{figures/module_diagram.pdf}
\caption{Mòduls del sistema}
\label{fig:module_diagram}
\end{center}
\end{figure}


\section{Llista de tasques}
A continuació es llisten les diferents tasques que s'han dut a terme durant la realització del projecte:
\begin{center}
\begin{longtable}{|l|}

\hline
\textbf{Tasca}                                                              \\
\hline
\hline
Recerca i proves de concepte                                                \\
Infraestructura (repositori, \textit{build tracker}, etc.)                  \\   

Extracció del text dels PDF (\texttt{bibim.rce})                            \\
\tab Comparació de resultats entre les diferents eines                      \\
\tab Tria de l'eina d'extracció                                             \\

Obtenció de pàgines amb la referència (\texttt{bibim.ir})                   \\
\tab Obtenir consultes del text                                             \\
\tab \textit{Browser} per obtenir pàgines de la Web                         \\
\tab Ús de les APIs dels cercadors                                          \\
\tab Cerca de les consultes (múltiples cercadors)                           \\
\tab Ordenació resultats de la cerca                                        \\   

Extracció d'informació (\texttt{bibim.ie})                                  \\
\tab Anàlisi de l'estructura d'algunes biblioteques digitals disponibles    \\
\tab \textit{Wrappers} a mà per extreure referències directament            \\
\tab \textit{Wrappers} a mà per extreure camps                              \\                    
\tab Validació de les referències extretes                                  \\

Generació automàtica de \textit{wrappers}                                   \\
\tab Extracció d'exemples                                                   \\
\tab Generació de regles                                                    \\
\tab \textit{Wrapper} genèric                                               \\
\hline

Tractament de referències (\texttt{bibim.references})                       \\
\tab \textit{Parsing}                                                       \\
\tab Generació                                                              \\
\tab Crear índexs                                                           \\




Base de dades (\texttt{bibim.db})                                           \\
\tab Disseny
\tab 

    

Mòdul principal (\texttt{bibim.main})                                       \\
\tab Escaneig de fitxers                                                    \\
\tab Codi principal de l'aplicació                                          \\
\tab \textit{Threading}                                                     \\
\tab Validació de referències                                               \\
\hline


Interfície d'usuari (\texttt{bibim.ui})                                     \\
\tab Editor de referències                                                  \\
\tab Editor de \textit{wrappers}                                            \\
\hline
\hline
\end{longtable}
\end{center}
